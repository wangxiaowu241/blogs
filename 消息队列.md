## 一、使用消息队列的好处

  1.解耦<br>
  例如，订单系统接收一个订单，处于下游的物流系统、购物车系统等分别都要进行相应的处理。如果采用接口调用的方式，那至少要调用两次，如果再对接一个新的系统，源代码还要再修改，耦合度太高。使用消息队列后，订单系统创建一个topic，产生新订单时，只需要发送一条消息，在message中传入相应的内容，比如订单id等等，下游的系统订阅到这条消息，再进行自己相应的处理即可。如果再接入新的系统，只需要也订阅这条topic即可。订单系统无须做任何修改。<br>
2.异步.<br>
  订单系统只需将消息发送到消息队列即可，无须等待下游系统的响应，处理速度变快，对调用方响应速度也变快。单位时间接收新订单能力增强，并发能力变强。即使接入再多的系统，处理速度也不会改变。<br>
3.削峰。<br>
  高峰时刻，订单系统接入的消息较多，放入消息队列中，一点一点去处理，避免下游压力过大。高峰时刻消息些许延迟是可以允许的。


## 二、使用消息队列时需要注意的事项

​	1.消息重复消费

​	在实际生产环境中，由于网络不稳定，可能会导致消息重复，消费者在收到消息时要做到幂等性。

​	如：message中携带业务主键及数据库字段判断是否消费过。

​	2.消息无序问题

​	 消息队列是不保证消息的有序性，如果需要做到消息有序发送、消费，需要查询相关MQ的官方文档。

​	3.消息堆积问题

​	  在高峰时段，消息消费失败过多，会导致队列中堆积消息过多，消费失败的消息如果不进行确认消费成功，可能会一直发送此消息，导致后续消息一直无法消费。防止消息始终消费失败导致其他消息也无法消费的情况。